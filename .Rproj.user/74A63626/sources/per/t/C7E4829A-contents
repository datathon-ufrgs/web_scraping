require(wdman)
require(RSelenium)
require(XML)

cDr <- chrome(port = 4444L)
remDr <- remoteDriver(browserName = "chrome", port = 4444L)
remDr$open(silent = T)
remDr$navigate("https://login.globo.com/login/464")

email <- remDr$findElement(using = 'css selector', 
                            '#login')

email$sendKeysToElement(list("cartolationstat@gmail.com"))


key <- remDr$findElement(using = 'css selector', 
                           '#password')

key$sendKeysToElement(list("Estatistica"))

entrar <- remDr$findElement(using = 'css selector',
                            '#tpl-content > div.container.ng-scope > div.form-container.dynamic-window-sized > form > div.actions > button')

entrar$clickElement()


## Indo para o cartola

remDr$navigate("https://cartolafc.globo.com/#/home")

tabela <- remDr$findElement(using = 'css selector',
                            'body > div > div.cartola-conteudo.well > ui-view > div.row.small-collapse.cartola-mercado-content > div > div:nth-child(3)')

elemtxt <- tabela$getElementAttribute("outerHTML")[[1]] 

elemxml <- htmlTreeParse(elemtxt, useInternalNodes = T, encoding = "UTF-8")

tab <- readHTMLTable(doc = elemxml, header = T, which = 1, as.data.frame = T)

teste <- readHTMLList(doc = elemxml, which = 1)
